<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <style type="text/css"><!--
	.code {
	  border: 2px dotted;

	  font-family: Courier,monospace;
	  font-size: 90%;

	  background-color: #E0E0E0;
	  margin-left: 10;
	  margin-right: 10;
	  padding-left: 10;
	  padding-right: 10;
	  padding-top: 0;
	  padding-bottom: 10;
	}
    a { text-decoration: none; color: #0000cc }
    a:hover { text-decoration: underline; color: #0000cc; }
  --></style>
<title>Spyce - Python Server Pages (PSP)</title>
  <meta NAME="LANGUAGE" CONTENT="en-US">
  <meta NAME="RATING" CONTENT="GENERAL">
  <meta NAME="ROBOTS" CONTENT="ALL">
  <meta name="abstract" content="Spyce is a server-side language that supports simple and efficient Python-based dynamic HTML generation. Those who like Python and are familiar with JSP, or PHP, or ASP, should have a look at Spyce.">
  <meta name="description" content="Spyce - Python Server Pages: a server-side language that supports simple and efficient Python-based dynamic HTML generation.">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta HTTP-EQUIV="Refresh" CONTENT="1800">
  <meta HTTP-EQUIV="Revisit-After" CONTENT="15 days">
  <link rel="icon" href="spycefav.ico" type="image/x-icon">
  <link rel="shortcut icon" href="spycefav.ico" type="image/x-icon">
<link rel="Next" href="doc-None.html">
<link rel="next" href="doc-None.html">
<link rel="Previous" href="doc-None.html">
<link rel="Prev" href="doc-None.html">
<link rel="prev" href="doc-None.html">
<link rel="Contents" href="doc.html">
<link rel="contents" href="doc.html">
</head>

<body bgcolor="#efefef">

<table border=0 cellspacing=0 cellpadding=0 width="100%"><tr><td valign=top>

<!-- links section -->

<!-- index -->
<table border=0 align=center width="100%"><tr><td align=center nowrap>
  <a href="http://spyce.sourceforge.net"><img src="/spyce.gif" border=0 alt="spyce" width=58 height=70></a>
</td></tr></table>

<table align=center border=1 cellpadding=4 cellspacing=0 bgcolor="#CCCCCC">
<tr><td align=left bgColor="#AAAAAA"><b>
  <font face="arial, helvetica" size="-1">
<b><a href="/index.html">home</a></b><br>
  </font>
</b></td></tr>
<tr><td align=left>
  <font face="arial, helvetica" size="-1">
<b><a href="http://svn-hosting.com/svn/spyce/trunk/spyce/CHANGES">changelog</a></b><br>
<b><a href="/docs/license.html">license</a></b><br>
<b><a href="/docs/get.html">download</a></b><br>
<b><a href="/docs/mail.html">community</a></b><br>
<b><a href="/docs/wishlist.html">wishlist</a></b><br>
  </font>
</td></tr>
<tr><td align=left bgColor="#AAAAAA"><b>
  <font face="arial, helvetica" size="-1">
<b><a href="/docs/doc.html">documentation</a></b><br>
  </font>
</b></td></tr>
<tr><td align=left>
  <font face="arial, helvetica" size="-1">
<b><a href="/docs/doc-intro.html">intro</a></b><br>
<b><a href="/docs/doc-lang.html">language</a></b><br>
<b><a href="/docs/doc-runtime.html">runtime</a></b><br>
<b><a href="/docs/doc-mod.html">modules</a></b><br>
<b><a href="/docs/doc-tag.html">tags</a></b><br>
<b><a href="/docs/doc-conf.html">install</a></b><br>
<b><a href="/docs/eg.html">examples list</a></b><br>
  </font>
</td></tr>
<tr><td align=left bgColor="#AAAAAA"><b>
  <font face="arial, helvetica" size="-1">
      <b>other</b>
  </font>
</b></td></tr>
<tr><td align=left>
  <font face="arial, helvetica" size="-1">
<b><a href="/docs/links.html">resources</a></b><br>
<b><a href="http://sourceforge.net/projects/spyce/">sf project</a></b><br>
<b><a href="http://spyced.blogspot.com/">spyced blog</a></b><br>
  </font>
</td></tr></table><br>

<!-- spacers -->
</td>
<td width=15><img src=/trans1x1.gif width=15 height=1 ></td>
<td width=1 bgcolor="#888888"><img src=/trans1x1.gif width=1 height=1 ></td>
<td width=15><img src=/trans1x1.gif width=15 height=1 ></td>
<td width="100%" valign=top>

<!-- page title -->
<table border=0 width="100%"><tr>
  <td nowrap valign=bottom>
    <b><font face="arial, helvetica" size="-1"><big>Documentation</big></font></b><br clear=all>
  </td>
  <td align=right nowrap valign=bottom>
    <font face="arial, helvetica" size="-1">
    <b><big>[[ <font face="arial, helvetica" color="#cc0000">Spyce</font> ]]</big></b><br>
    </font>
</tr></table>

<hr>
<font face="arial, helvetica" size="-1">

<!-- body -->

<table width="100%" align=center><tr>
    <td align=left width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Prev:</b> None</font></td>
    <td align=center width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Up:</b> None</font></td>
    <td align=right width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Next:</b> None</font></td>
</tr></table>
<hr>
<big><a name="runtime_common"></a><b>3.6. <font color=#ee0000>Configuration</font></b></big><p>


Since there are a variety of very different
<a href="doc-conf.html">installation</a>
alternatives for the Spyce
engine, effort has been invested in consolidating all the various runtime
configuration options. By default, the Spyce engine will search for a file
called <b>spyceconf.py</b> in its installation directory. An alternative file
location may be specified via the <b>--conf</b> command-line option.
<p>
The spyce configuration file is a valid python module; any python code
may be used. To avoid duplicating a lot of code, we recommend starting with
"from spyceconf import *" and modifying only those settings you wish to change.
One thing you can't do from the config module is access the spyce server object
(spyce.getServer()) itself, since it hasn't been completely initialized yet.
<p>
You may access the loaded configuration module from .spy pages (or python
modules) as the config attribute of the server object. For example,

<table border=1 align=center>
<tr><td align=left bgcolor="#cccccc">
  <font face="arial, helvetica" size="-1"><b>examples/config.spy</b></font>
</td></tr><tr><td>
  <font face=courier>

    <pre><font color="#000000"><b><font color="#0000CC">[[\
  import spyce
  home = spyce.getServer().config.SPYCE_HOME
]]</font>

<font color="#CC0000">[[= home ]]</font>
</b></font></pre>
  </font>

  </td></tr><tr><td align=right bgcolor="#cccccc">
    <font face="arial, helvetica" size="-1">
      
      <b><a href="examples/config.spy">Run this code</a></b>
    </font>

</td></tr></table>
<p>
Here is the configuration file this server is running. The length of the file is
primarily due to the thoroughness of the comments; there are only a little more
than a dozen options.
<p>
<table class=code align=center><tr><td>

    
    
<style>    
.STRING {
  color: #a0522d;
}
.COMMENT {
  color: #ff7448;
  font-family: serif;
}
.KEYWORD {
  color: #9e79af;
}
.FUNCTION {
  color: #0074ef;
}
</style>
<pre>
<span class="COMMENT"># NOTE: do note write code that directly imports this module.
</span><span class="COMMENT"># This is a recipe for trouble, since spyce allows the user
</span><span class="COMMENT"># to specify the configuration module filename on the commandline.
</span><span class="COMMENT"># Instead, use import spyce; spyce.getServer().config.
</span><span class="NL">
</span><span class="KEYWORD">import</span> <span class="NAME">os</span><span class="OP">,</span> <span class="NAME">sys</span><span class="NEWLINE">
</span><span class="KEYWORD">import</span> <span class="NAME">spycePreload</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># Determine SPYCE_HOME dynamically.
</span><span class="COMMENT"># (you can hardcode SPYCE_HOME if you really want to, but it shouldn't be necessary.)
</span><span class="NAME">SPYCE_HOME</span> <span class="OP">=</span> <span class="NAME">spycePreload</span><span class="OP">.</span><span class="NAME">guessSpyceHome</span><span class="OP">(</span><span class="OP">)</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The spyce path determines which directories are searched for when
</span><span class="COMMENT"># loading modules (with [[.import]]) and tag libraries (with [[.taglib]]
</span><span class="COMMENT"># and the globaltags configuration later in this file.
</span><span class="COMMENT">#
</span><span class="COMMENT"># By default, the Spyce installation directory is always searched
</span><span class="COMMENT"># first. Any directories in the SPYCE_PATH environment are also
</span><span class="COMMENT"># searched.
</span><span class="COMMENT">#
</span><span class="COMMENT"># If you need to import from .py modules in nonstandard locations
</span><span class="COMMENT"># (i.e., not in your python installation's library directory),
</span><span class="COMMENT"># you will want to add their directories to sys.path as well, as
</span><span class="COMMENT"># done here for the error module.  (However, Spyce automagically
</span><span class="COMMENT"># changes sys.path dynamically so you will always be able to import
</span><span class="COMMENT"># modules in the same directory as your currently-processing .spy file.)
</span><span class="COMMENT">#
</span><span class="COMMENT"># path += ['/usr/spyce/inc/myapplication', '/var/myapp/lib']
</span><span class="NAME">path</span> <span class="OP">=</span> <span class="OP">[</span><span class="NAME">os</span><span class="OP">.</span><span class="NAME">path</span><span class="OP">.</span><span class="NAME">join</span><span class="OP">(</span><span class="NAME">SPYCE_HOME</span><span class="OP">,</span> <span class="STRING">'modules'</span><span class="OP">)</span><span class="OP">,</span> <span class="NAME">os</span><span class="OP">.</span><span class="NAME">path</span><span class="OP">.</span><span class="NAME">join</span><span class="OP">(</span><span class="NAME">SPYCE_HOME</span><span class="OP">,</span> <span class="STRING">'contrib'</span><span class="OP">,</span> <span class="STRING">'modules'</span><span class="OP">)</span><span class="OP">]</span><span class="NEWLINE">
</span><span class="NAME">sys</span><span class="OP">.</span><span class="NAME">path</span> <span class="OP">+=</span> <span class="NAME">path</span><span class="NEWLINE">
</span><span class="COMMENT"># .py code shouldn't need to import a tag file directly,
</span><span class="COMMENT"># so we don't include these in default sys.path
</span><span class="NAME">path</span><span class="OP">.</span><span class="NAME">append</span><span class="OP">(</span><span class="NAME">os</span><span class="OP">.</span><span class="NAME">path</span><span class="OP">.</span><span class="NAME">join</span><span class="OP">(</span><span class="NAME">SPYCE_HOME</span><span class="OP">,</span> <span class="STRING">'tags'</span><span class="OP">)</span><span class="OP">)</span><span class="NEWLINE">
</span><span class="NAME">path</span><span class="OP">.</span><span class="NAME">append</span><span class="OP">(</span><span class="NAME">os</span><span class="OP">.</span><span class="NAME">path</span><span class="OP">.</span><span class="NAME">join</span><span class="OP">(</span><span class="NAME">SPYCE_HOME</span><span class="OP">,</span> <span class="STRING">'contrib'</span><span class="OP">,</span> <span class="STRING">'tags'</span><span class="OP">)</span><span class="OP">)</span><span class="NEWLINE">
</span><span class="KEYWORD">if</span> <span class="NAME">os</span><span class="OP">.</span><span class="NAME">environ</span><span class="OP">.</span><span class="NAME">has_key</span><span class="OP">(</span><span class="STRING">'SPYCE_PATH'</span><span class="OP">)</span><span class="OP">:</span><span class="NEWLINE">
</span><span class="INDENT">    </span><span class="NAME">path</span> <span class="OP">+=</span> <span class="NAME">os</span><span class="OP">.</span><span class="NAME">environ</span><span class="OP">[</span><span class="STRING">'SPYCE_PATH'</span><span class="OP">]</span><span class="OP">.</span><span class="NAME">split</span><span class="OP">(</span><span class="NAME">os</span><span class="OP">.</span><span class="NAME">pathsep</span><span class="OP">)</span><span class="NEWLINE">
</span><span class="COMMENT"># provide originalsyspath so if someone wants to maintain a config file via
</span><span class="COMMENT"># "from spyceconf import *"
</span><span class="COMMENT"># he can remove the above modifications if desired.
</span><span class="DEDENT"></span><span class="NAME">originalsyspath</span> <span class="OP">=</span> <span class="NAME">sys</span><span class="OP">.</span><span class="NAME">path</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The globaltags option specifies a group of tag libraries that will be autoloaded
</span><span class="COMMENT"># as if [[.taglib name=libname from=file as=prefix]] were specified in every .spy
</span><span class="COMMENT"># file.  (There is no performance hit if the library is not used on a page;
</span><span class="COMMENT"># the Spyce compiler optimizes it out.)
</span><span class="COMMENT">#
</span><span class="COMMENT"># The format is ('libname', 'file', 'prefix').
</span><span class="COMMENT"># For a 2.0-style tag library, the libname attribute is ignored.  Passing None is fine.
</span><span class="COMMENT">#
</span><span class="COMMENT"># globaltags.append(('mytag', 'mytaglib.py', 'my'))
</span><span class="COMMENT"># globaltags.append((None, 'taglib2.py', 'my2'))
</span><span class="NAME">globaltags</span> <span class="OP">=</span> <span class="OP">[</span><span class="NL">
</span>    <span class="OP">(</span><span class="STRING">'core'</span><span class="OP">,</span> <span class="STRING">'core.py'</span><span class="OP">,</span> <span class="STRING">'spy'</span><span class="OP">)</span><span class="OP">,</span><span class="NL">
</span>    <span class="OP">(</span><span class="STRING">'form'</span><span class="OP">,</span> <span class="STRING">'form.py'</span><span class="OP">,</span> <span class="STRING">'f'</span><span class="OP">)</span><span class="OP">,</span><span class="NL">
</span>    <span class="OP">]</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The default parent template is the one that is used by &lt;spy:parent&gt;
</span><span class="COMMENT"># if no src attribute is given, specified as an absolute url.
</span><span class="NAME">defaultparent</span> <span class="OP">=</span> <span class="STRING">"/parent.spi"</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The errorhandler option sets the server-level error handler.  These
</span><span class="COMMENT"># errors include spyce.spyceNotFound, spyce.spyceForbidden,
</span><span class="COMMENT"># spyce.spyceSyntaxError and spyce.pythonSyntaxError.  (file-level
</span><span class="COMMENT"># error handling is defined within Spyce scripts using the error module.)
</span><span class="COMMENT">#
</span><span class="COMMENT"># The server will call the error handler as errorhandler(request, response, error).
</span><span class="COMMENT">#
</span><span class="COMMENT"># Please look at the default function if you are considering writing your own
</span><span class="COMMENT"># server error handler.
</span><span class="KEYWORD">import</span> <span class="NAME">error</span><span class="NEWLINE">
</span><span class="NAME">errorhandler</span> <span class="OP">=</span> <span class="NAME">error</span><span class="OP">.</span><span class="NAME">serverHandler</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The pageerror option sets the default page-level error handler.
</span><span class="COMMENT"># "Page-level" means all runtime errors that occur during the
</span><span class="COMMENT"># processing of a Spyce script (i.e. after the compilation phase has
</span><span class="COMMENT"># completed successfully)
</span><span class="COMMENT">#
</span><span class="COMMENT"># The format of this option is one of:
</span><span class="COMMENT">#   ('string', 'MODULE', 'VARIABLE')
</span><span class="COMMENT">#   ('file', 'URL')
</span><span class="COMMENT"># (This format is used since the error template must be transformed into
</span><span class="COMMENT"># compiled spyce code, which can't be done before the configuration file
</span><span class="COMMENT"># is completely loaded.)
</span><span class="COMMENT">#
</span><span class="COMMENT"># Please refer to the default template to see how to define your own
</span><span class="COMMENT"># page-level error handlers.
</span><span class="COMMENT">#
</span><span class="COMMENT"># pageerrortemplate = ('file', '/error.spy')
</span><span class="NAME">pageerrortemplate</span> <span class="OP">=</span> <span class="OP">(</span><span class="STRING">'string'</span><span class="OP">,</span> <span class="STRING">'error'</span><span class="OP">,</span> <span class="STRING">'defaultErrorTemplate'</span><span class="OP">)</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The cache option affects the underlying cache mechanism that the
</span><span class="COMMENT"># server uses to maintain compiled Spyce scripts. The general format
</span><span class="COMMENT"># for this option is TYPE:INFO, where TYPE defines the cache handler
</span><span class="COMMENT"># and INFO is specific to that cache handler. Currently, Spyce
</span><span class="COMMENT"># supports two cache handlers:
</span><span class="COMMENT">#
</span><span class="COMMENT">#   cache = 'memory'
</span><span class="COMMENT">#   OR
</span><span class="COMMENT">#   cache = 'file'
</span><span class="COMMENT">#   cachedir = '/tmp' # REQUIRED: directory in which to store compiled files
</span><span class="COMMENT">#
</span><span class="COMMENT"># Why store the cache in the filesystem instead of memory?  The main
</span><span class="COMMENT"># reason is if you are running under CGI or mod_python.  Under
</span><span class="COMMENT"># mod_python, Apache will kick off a number of separate spyce
</span><span class="COMMENT"># processes; each would have its own memory cache; using the
</span><span class="COMMENT"># filesystem avoids wasteful duplication.  (Pointing the cachedir to a
</span><span class="COMMENT"># ramdisk makes it almost as fast as a memory cache.)  Under CGI of
</span><span class="COMMENT"># course, the python process isn't persistent so file caching is the
</span><span class="COMMENT"># only option to avoid expensive recompilation with each request.
</span><span class="NAME">cache</span> <span class="OP">=</span> <span class="STRING">'memory'</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The check_mtime option affects the caching of compiled Spyce code.
</span><span class="COMMENT"># When True, Spyce will check file timestamps with each request and
</span><span class="COMMENT"># recompile if they have been modified.  Setting this to False can
</span><span class="COMMENT"># speed up a "production server" but you will have to restart the
</span><span class="COMMENT"># server and (if using a file cache) clear out the cachedir
</span><span class="COMMENT"># to have changes made in the spyce code take effect.
</span><span class="NAME">check_mtime</span> <span class="OP">=</span> <span class="NAME">True</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The debug option turns on a LOT of logging to stderr.
</span><span class="NAME">debug</span> <span class="OP">=</span> <span class="NAME">True</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The globals section defines server-wide constants. The hashtable is
</span><span class="COMMENT"># accessible as "pool" within any Spyce file (with the pool
</span><span class="COMMENT"># method loaded), or as self._api.getServerGlobals() within any Spyce
</span><span class="COMMENT"># module.
</span><span class="COMMENT">#
</span><span class="COMMENT"># globals = {'name': "My Website", 'four': 2+2}
</span><span class="NAME">globals</span> <span class="OP">=</span> <span class="OP">{</span><span class="OP">}</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># You may wish to pre-load various Python modules during engine initialization.
</span><span class="COMMENT"># Once imported, they will be in the python module cache.
</span><span class="COMMENT">#
</span><span class="COMMENT"># (You may of course use normal imports at any time in this configuration script;
</span><span class="COMMENT"># however, imports specified here are run after the Spyce server is
</span><span class="COMMENT"># completely initialized, making it safe to access the server internals via
</span><span class="COMMENT"># import spyce; spyce.getServer()...)
</span><span class="COMMENT">#
</span><span class="COMMENT"># imports = ['myModule', 'myModule2']
</span><span class="NAME">imports</span> <span class="OP">=</span> <span class="OP">[</span><span class="OP">]</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The root option defines the path from which Spyce requests are processed.
</span><span class="COMMENT"># I.e., when a request for http://yourserver/path/foo.spy arrives,
</span><span class="COMMENT"># Spyce looks for foo.spy in &lt;root&gt;/path/.
</span><span class="COMMENT"># 
</span><span class="COMMENT"># root = '/var/www/html'
</span><span class="NAME">root</span> <span class="OP">=</span> <span class="NAME">os</span><span class="OP">.</span><span class="NAME">path</span><span class="OP">.</span><span class="NAME">join</span><span class="OP">(</span><span class="NAME">SPYCE_HOME</span><span class="OP">,</span> <span class="STRING">'www'</span><span class="OP">)</span><span class="NEWLINE">
</span><span class="COMMENT"># feel free to comment this next line out if you don't have python modules (.py) in your web root
</span><span class="NAME">sys</span><span class="OP">.</span><span class="NAME">path</span><span class="OP">.</span><span class="NAME">append</span><span class="OP">(</span><span class="NAME">root</span><span class="OP">)</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># some parts of spyce may need to create temporary files; usually the default is fine
</span><span class="KEYWORD">import</span> <span class="NAME">tempfile</span><span class="NEWLINE">
</span><span class="NAME">tmp</span> <span class="OP">=</span> <span class="NAME">tempfile</span><span class="OP">.</span><span class="NAME">gettempdir</span><span class="OP">(</span><span class="OP">)</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT">######
</span><span class="COMMENT"># webserver options
</span><span class="COMMENT">######
</span><span class="NL">
</span><span class="COMMENT"># indexExtensions specifies a list of extensions to look for
</span><span class="COMMENT"># matching index files in a directory if directory itself is requested.
</span><span class="COMMENT"># The first matching file will be selected.
</span><span class="COMMENT"># If empty, a directory listing will be served instead.
</span><span class="COMMENT">#
</span><span class="COMMENT"># indexExtensions = ['spy', 'html', 'txt']
</span><span class="NAME">indexExtensions</span> <span class="OP">=</span> <span class="OP">[</span><span class="OP">]</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The concurrency option specifies the concurrency mode that the Spyce
</span><span class="COMMENT"># webserver will operate in. The Spyce engine can process requests
</span><span class="COMMENT"># serially (i.e. one-at-a-time), or in parallel using either
</span><span class="COMMENT"># process-level (forking) or thread-level (threading)
</span><span class="COMMENT"># concurrency. Note that this option affects the request processing
</span><span class="COMMENT"># parallelism of a single engine. Request processing parallelism may
</span><span class="COMMENT"># also be acheived by running multiple instances of the engine, and
</span><span class="COMMENT"># this choice is independent of the follow discussion.
</span><span class="COMMENT">#
</span><span class="COMMENT"># (The "one shot" Spyce configurations, namely CGI-based or
</span><span class="COMMENT"># command-line execution, are unaffected by the concurrency option,
</span><span class="COMMENT"># since the server only processes one request per Spyce engine
</span><span class="COMMENT"># invocation.  The FastCGI configuration does not currently support
</span><span class="COMMENT"># parallel request processing due to a limitation of the FastCGI
</span><span class="COMMENT"># interface code (not anything inherent to the core of the Spyce
</span><span class="COMMENT"># engine). This may be remedied in the future.
</span><span class="COMMENT">#
</span><span class="COMMENT"># (The mod_python configuration does not support parallel request
</span><span class="COMMENT"># processing within a single engine, since it is not supported by the
</span><span class="COMMENT"># mod_python interface. In fact, many mod_python compilations do not
</span><span class="COMMENT"># even allow threading in the Python interpretter. However, mod_python
</span><span class="COMMENT"># configurations run one Spyce engine per Apache child, and achieve
</span><span class="COMMENT"># request processing parallelism in this way.)
</span><span class="COMMENT">#
</span><span class="COMMENT"># Legal values are 'thread' (or 'threading') and 'fork'
</span><span class="COMMENT"># (or 'forking'). Any other value will result in serial request
</span><span class="COMMENT"># processing.  (Forking is unavailable under Microsoft Windows.)
</span><span class="NAME">concurrency</span> <span class="OP">=</span> <span class="STRING">'threading'</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># Restart the webserver if a python module changes.
</span><span class="COMMENT"># Spyce does this by running the "real" server in a subprocess; when that
</span><span class="COMMENT"># server detects changed modules, it exits and Spyce starts another one.
</span><span class="COMMENT">#
</span><span class="COMMENT"># (_no_restart will do nothing if you have this one turned on.)
</span><span class="COMMENT"># Spyce will check for changes every second, or when a request
</span><span class="COMMENT"># is made, whichever comes first.
</span><span class="COMMENT">#
</span><span class="COMMENT"># It's highly recommended to turn this off for "production" servers,
</span><span class="COMMENT"># since checking each module for each request is a performance hit.
</span><span class="NAME">check_modules_and_restart</span> <span class="OP">=</span> <span class="NAME">True</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># reload python modules without restarting the server.
</span><span class="COMMENT"># If you don't keep objects around between requests, you may be able
</span><span class="COMMENT"># to get away with setting this to True and restart_for_modules to False.
</span><span class="COMMENT"># It's safer though to restart the server to make sure all references to
</span><span class="COMMENT"># the old code are cleared out of the Python interpreter, which is why
</span><span class="COMMENT"># _and_restart is the default.  (See, for instance,
</span><span class="COMMENT"># http://lists.canonical.org/pipermail/kragen-hacks/2002-January/000302.html
</span><span class="COMMENT"># for more details about why reloading new module versions is problematic,
</span><span class="COMMENT"># or google groups for the "Deprecating reload() ???" thread in c.l.py.)
</span><span class="COMMENT">#
</span><span class="COMMENT"># It's recommended to turn this off for "production" servers,
</span><span class="COMMENT"># since checking each module for each request is a performance hit.
</span><span class="NAME">check_modules_no_restart</span> <span class="OP">=</span> <span class="NAME">False</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The ipaddr option defines which IP addresses the server will listen on.
</span><span class="COMMENT"># empty string for all.
</span><span class="NAME">ipaddr</span> <span class="OP">=</span> <span class="STRING">''</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The port option defines which TCP port the server will listen on.
</span><span class="NAME">port</span> <span class="OP">=</span> <span class="NUMBER">8000</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The mime option is a list of filenames. The files should
</span><span class="COMMENT"># be definitions of mime-types for common file extensions in the
</span><span class="COMMENT"># standard Apache format.
</span><span class="COMMENT">#
</span><span class="COMMENT"># mime: ['/etc/mime.types']
</span><span class="NAME">mime</span> <span class="OP">=</span> <span class="OP">[</span><span class="NAME">os</span><span class="OP">.</span><span class="NAME">path</span><span class="OP">.</span><span class="NAME">join</span><span class="OP">(</span><span class="NAME">SPYCE_HOME</span><span class="OP">,</span> <span class="STRING">'spyce.mime'</span><span class="OP">)</span><span class="OP">]</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="COMMENT"># The www_handlers option defines the hander used for files
</span><span class="COMMENT"># of arbitrary extensions.  (The None key specifies the
</span><span class="COMMENT"># default.)
</span><span class="COMMENT"># The currently supported handlers are:
</span><span class="COMMENT">#   spyce - process the file at the requested path a spyce script
</span><span class="COMMENT">#   dump  - transfer the file at the requested path verbatim, 
</span><span class="COMMENT">#     providing an appropriate "Content-type" header, if it is known.
</span><span class="COMMENT"># (It's difficult to use the actual instance methods here since we
</span><span class="COMMENT"># don't have a handle to the WWW server object.  So, we use strings
</span><span class="COMMENT"># and let spyceWWW eval them later.)
</span><span class="NAME">www_handlers</span> <span class="OP">=</span> <span class="OP">{</span><span class="STRING">'spy'</span><span class="OP">:</span> <span class="STRING">'spyce'</span><span class="OP">,</span><span class="NL">
</span>               <span class="NAME">None</span><span class="OP">:</span> <span class="STRING">'dump'</span><span class="OP">}</span><span class="NEWLINE">
</span><span class="NL">
</span><span class="NL">
</span><span class="COMMENT">######
</span><span class="COMMENT"># standard module customization
</span><span class="COMMENT">######
</span><span class="NL">
</span><span class="COMMENT"># (request module)
</span><span class="NL">
</span><span class="COMMENT"># param filters and file filters are lists of functions that are called
</span><span class="COMMENT"># for all GET and POST parameters or files, respectively.
</span><span class="COMMENT"># Each callable should expect two arguments: a reference to the
</span><span class="COMMENT"># request object/spyce module, and the dictionary being filtered.
</span><span class="COMMENT"># (Thus, each callable in param_filters will be called twice; once for the
</span><span class="COMMENT"># GET dict and once for POST. Each callable in file_filters will only be called once.)
</span><span class="NAME">param_filters</span> <span class="OP">=</span> <span class="OP">[</span><span class="OP">]</span><span class="NEWLINE">
</span><span class="NAME">file_filters</span> <span class="OP">=</span> <span class="OP">[</span><span class="OP">]</span><span class="NEWLINE">
</span><span class="ENDMARKER"></span>
</pre>
    
    </td></tr></table>
<p>
<hr>

<table width="100%" align=center><tr>
    <td align=left width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Prev:</b> None</font></td>
    <td align=center width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Up:</b> None</font></td>
    <td align=right width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Next:</b> None</font></td>
</tr></table>
<!-- end body -->
<p>
</font>
</td></tr>
<tr><td colspan=5><hr></td></tr>
<tr><td colspan=5 height=15></td></tr>
<tr><td colspan=5>

  <table width="100%" border=0><tr>
    <td align=left valign=top>
      <font face="arial, helvetica" size="-1">
      <b><big>[[ <font face="arial, helvetica" color="#cc0000">Spyce</font> ]]</big></b><br>
      <small>Python Server Pages<br>version 2.0.3</small>
      </font>
    </td><td align=center valign=top>
      <a href="http://spyce.sourceforge.net"><img align=middle width=120 height=50 border=0 src="/spycepow.gif" alt="Spyce Powered"></a>
      <a href="http://sourceforge.net"><img align=middle src="http://sourceforge.net/sflogo.php?group_id=53655&amp;type=5" width="141" height="50" border="0" alt="SourceForge Logo"></a>
    </td><td align=right valign=top>
    </td>
  </tr></table>

</td></tr></table>

</body></html>
