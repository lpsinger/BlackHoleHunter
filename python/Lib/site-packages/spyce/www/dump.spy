[[ import re ]]
[[.import name=include ]]
[[\
    path = request['path']
    f = open(path)
    if path.endswith('.spy') or path.endswith('.spi'):
        print "<html><body><pre>%s</pre></body></html>" % include.spycecode(string=f.read())
    elif path.endswith('.py'):
        import pp
        s = "<body><html>%s</body></html>" % pp.prettyhtml(f)
        print s
    else:
        response.setContentType('text/plain')
        print f.read()

    f.close()
]]
