<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <style type="text/css"><!--
	.code {
	  border: 2px dotted;

	  font-family: Courier,monospace;
	  font-size: 90%;

	  background-color: #E0E0E0;
	  margin-left: 10;
	  margin-right: 10;
	  padding-left: 10;
	  padding-right: 10;
	  padding-top: 0;
	  padding-bottom: 10;
	}
    a { text-decoration: none; color: #0000cc }
    a:hover { text-decoration: underline; color: #0000cc; }
  --></style>
<title>Spyce - Python Server Pages (PSP)</title>
  <meta NAME="LANGUAGE" CONTENT="en-US">
  <meta NAME="RATING" CONTENT="GENERAL">
  <meta NAME="ROBOTS" CONTENT="ALL">
  <meta name="abstract" content="Spyce is a server-side language that supports simple and efficient Python-based dynamic HTML generation. Those who like Python and are familiar with JSP, or PHP, or ASP, should have a look at Spyce.">
  <meta name="description" content="Spyce - Python Server Pages: a server-side language that supports simple and efficient Python-based dynamic HTML generation.">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta HTTP-EQUIV="Refresh" CONTENT="1800">
  <meta HTTP-EQUIV="Revisit-After" CONTENT="15 days">
  <link rel="icon" href="spycefav.ico" type="image/x-icon">
  <link rel="shortcut icon" href="spycefav.ico" type="image/x-icon">
<link rel="Next" href="doc-None.html">
<link rel="next" href="doc-None.html">
<link rel="Previous" href="doc-None.html">
<link rel="Prev" href="doc-None.html">
<link rel="prev" href="doc-None.html">
<link rel="Contents" href="doc.html">
<link rel="contents" href="doc.html">
</head>

<body bgcolor="#efefef">

<table border=0 cellspacing=0 cellpadding=0 width="100%"><tr><td valign=top>

<!-- links section -->

<!-- index -->
<table border=0 align=center width="100%"><tr><td align=center nowrap>
  <a href="http://spyce.sourceforge.net"><img src="/spyce.gif" border=0 alt="spyce" width=58 height=70></a>
</td></tr></table>

<table align=center border=1 cellpadding=4 cellspacing=0 bgcolor="#CCCCCC">
<tr><td align=left bgColor="#AAAAAA"><b>
  <font face="arial, helvetica" size="-1">
<b><a href="/index.html">home</a></b><br>
  </font>
</b></td></tr>
<tr><td align=left>
  <font face="arial, helvetica" size="-1">
<b><a href="http://svn-hosting.com/svn/spyce/trunk/spyce/CHANGES">changelog</a></b><br>
<b><a href="/docs/license.html">license</a></b><br>
<b><a href="/docs/get.html">download</a></b><br>
<b><a href="/docs/mail.html">community</a></b><br>
<b><a href="/docs/wishlist.html">wishlist</a></b><br>
  </font>
</td></tr>
<tr><td align=left bgColor="#AAAAAA"><b>
  <font face="arial, helvetica" size="-1">
<b><a href="/docs/doc.html">documentation</a></b><br>
  </font>
</b></td></tr>
<tr><td align=left>
  <font face="arial, helvetica" size="-1">
<b><a href="/docs/doc-intro.html">intro</a></b><br>
<b><a href="/docs/doc-lang.html">language</a></b><br>
<b><a href="/docs/doc-runtime.html">runtime</a></b><br>
<b><a href="/docs/doc-mod.html">modules</a></b><br>
<b><a href="/docs/doc-tag.html">tags</a></b><br>
<b><a href="/docs/doc-conf.html">install</a></b><br>
<b><a href="/docs/eg.html">examples list</a></b><br>
  </font>
</td></tr>
<tr><td align=left bgColor="#AAAAAA"><b>
  <font face="arial, helvetica" size="-1">
      <b>other</b>
  </font>
</b></td></tr>
<tr><td align=left>
  <font face="arial, helvetica" size="-1">
<b><a href="/docs/links.html">resources</a></b><br>
<b><a href="http://sourceforge.net/projects/spyce/">sf project</a></b><br>
<b><a href="http://spyced.blogspot.com/">spyced blog</a></b><br>
  </font>
</td></tr></table><br>

<!-- spacers -->
</td>
<td width=15><img src=/trans1x1.gif width=15 height=1 ></td>
<td width=1 bgcolor="#888888"><img src=/trans1x1.gif width=1 height=1 ></td>
<td width=15><img src=/trans1x1.gif width=15 height=1 ></td>
<td width="100%" valign=top>

<!-- page title -->
<table border=0 width="100%"><tr>
  <td nowrap valign=bottom>
    <b><font face="arial, helvetica" size="-1"><big>Documentation</big></font></b><br clear=all>
  </td>
  <td align=right nowrap valign=bottom>
    <font face="arial, helvetica" size="-1">
    <b><big>[[ <font face="arial, helvetica" color="#cc0000">Spyce</font> ]]</big></b><br>
    </font>
</tr></table>

<hr>
<font face="arial, helvetica" size="-1">

<!-- body -->

<table width="100%" align=center><tr>
    <td align=left width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Prev:</b> None</font></td>
    <td align=center width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Up:</b> None</font></td>
    <td align=right width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Next:</b> None</font></td>
</tr></table>
<hr>
<big><a name="mod_request"></a><b>4.1. <font color=#ee0000>Request</font></b></big><p>


The request module is loaded implicitly into every Spyce environment.
<p>
The spyce configuration file gives two lists that affect the request module:
param_filters and file_filters. param_filters is a list of functions to run
against the GET and POST variables in the request; file filters is the same,
only for files uploaded. Each function will be passed the request module
and a dictionary when it is called; each will be called once for GET and once for POST
with each new request.
<p>
These hooks exist because the request dictionaries should not be modified
in an ad-hoc manner; these allow you to set an application-wide policy
in a well-defined manner. You might, for instance, disallow all file uploads
over 1 MB.
<p>
Here's an example that calls either Html.clean
or Html.escape (not shown) to ensure that no potentially harmful html can
be injected in user-editable areas of a site:

<table border=1 align=center>
<tr><td align=left bgcolor="#cccccc">
  <font face="arial, helvetica" size="-1"><b>examples/filter.py</b></font>
</td></tr><tr><td>
  <font face=courier>

    
<style>    
.STRING {
  color: #a0522d;
}
.COMMENT {
  color: #ff7448;
  font-family: serif;
}
.KEYWORD {
  color: #9e79af;
}
.FUNCTION {
  color: #0074ef;
}
</style>
<pre>
<span class="KEYWORD">def</span> <span class="FUNCTION">htmlFilter</span><span class="OP">(</span><span class="NAME">request</span><span class="OP">,</span> <span class="NAME">d</span><span class="OP">)</span><span class="OP">:</span><span class="NEWLINE">
</span>  <span class="COMMENT"># note that spoofing __htmlfields doesn't help attacker get unsafe html in;
</span>  <span class="COMMENT"># we always call either clean() or escape().
</span><span class="INDENT">  </span><span class="KEYWORD">try</span><span class="OP">:</span><span class="NEWLINE">
</span>    <span class="COMMENT"># don't use request['__htmlfields'], or you will recurse infinitely
</span><span class="INDENT">    </span><span class="NAME">toClean</span> <span class="OP">=</span> <span class="NAME">request</span><span class="OP">.</span><span class="NAME">_post</span><span class="OP">[</span><span class="STRING">'__htmlfields'</span><span class="OP">]</span><span class="OP">[</span><span class="NUMBER">0</span><span class="OP">]</span><span class="OP">.</span><span class="NAME">split</span><span class="OP">(</span><span class="STRING">','</span><span class="OP">)</span><span class="NEWLINE">
</span>  <span class="DEDENT"></span><span class="KEYWORD">except</span> <span class="NAME">KeyError</span><span class="OP">:</span><span class="NEWLINE">
</span><span class="INDENT">    </span><span class="NAME">toClean</span> <span class="OP">=</span> <span class="OP">[</span><span class="OP">]</span><span class="NEWLINE">
</span>  <span class="DEDENT"></span><span class="KEYWORD">for</span> <span class="NAME">key</span> <span class="KEYWORD">in</span> <span class="NAME">d</span><span class="OP">:</span><span class="NEWLINE">
</span><span class="INDENT">    </span><span class="KEYWORD">if</span> <span class="NAME">key</span> <span class="KEYWORD">in</span> <span class="NAME">toClean</span><span class="OP">:</span><span class="NEWLINE">
</span><span class="INDENT">      </span><span class="NAME">d</span><span class="OP">[</span><span class="NAME">key</span><span class="OP">]</span> <span class="OP">=</span> <span class="OP">[</span><span class="NAME">Html</span><span class="OP">.</span><span class="NAME">clean</span><span class="OP">(</span><span class="NAME">s</span><span class="OP">)</span> <span class="KEYWORD">for</span> <span class="NAME">s</span> <span class="KEYWORD">in</span> <span class="NAME">d</span><span class="OP">[</span><span class="NAME">key</span><span class="OP">]</span><span class="OP">]</span><span class="NEWLINE">
</span>    <span class="DEDENT"></span><span class="KEYWORD">else</span><span class="OP">:</span><span class="NEWLINE">
</span><span class="INDENT">      </span><span class="NAME">d</span><span class="OP">[</span><span class="NAME">key</span><span class="OP">]</span> <span class="OP">=</span> <span class="OP">[</span><span class="NAME">Html</span><span class="OP">.</span><span class="NAME">escape</span><span class="OP">(</span><span class="NAME">s</span><span class="OP">)</span> <span class="KEYWORD">for</span> <span class="NAME">s</span> <span class="KEYWORD">in</span> <span class="NAME">d</span><span class="OP">[</span><span class="NAME">key</span><span class="OP">]</span><span class="OP">]</span><span class="NEWLINE">
</span><span class="DEDENT"></span><span class="DEDENT"></span><span class="DEDENT"></span><span class="ENDMARKER"></span>
</pre>
    
  </font>

</td></tr></table>

<p>
<b>The request module provides the following methods:</b>
<ul>
<li><b>uri</b>( [component] ): <br> Returns the request URI, or some
component thereof. If the optional <b>component</b> parameter is specified,
it should be one of the following strings:
<font face=courier>'scheme'</font>,
<font face=courier>'location'</font>,
<font face=courier>'path'</font>,
<font face=courier>'parameters'</font>,
<font face=courier>'query'</font> or
<font face=courier>'fragment'</font>.
</li><p>
<li><b>method</b>(): <br> Returns request method type (GET, POST,
...)</li><p>
<li><b>query</b>(): <br> Returns the request query string</li><p>
<li><b>get</b>( [name], [default], [ignoreCase] ): <br> Returns request GET
information. If <b>name</b> is specified then a single list of values is
returned if the parameter exists, or <b>default</b>, which defaults to an
empty list,
if the parameter does not exist. Parameters without values are skipped,
though empty string values are allowed. If name is omitted, then a
dictionary of lists is returned. If <b>ignoreCase</b> is true, then the
above behaviour is performed in a case insensitive manner (all parameters
are treated as lowercase). </li><p>
<li><b>get1</b>( [name], [default], [ignoreCase] ): <br> Returns request GET
information, similarly to (though slightly differently from) the function
above. If <b>name</b> is specified then a single string is returned if the
parameter exists, or <b>default</b>, which default to None, if the parameter
does not exist. If there is more than one value for a parameter, then only
one is returned. Parameters without values are skipped, though empty string
values are allowed. If name is omitted, then a dictionary of strings is
returned. If the optional <b>ignoreCase</b> flag is true, then the above
behaviour is performed in a case insensitive manner (all parameters are
treated as lowercase). </li><p>
<li><b>post</b>( [name], [default], [ignoreCase] ): <br> Returns request
POST information. If <b>name</b> is specified then a single list of values
is returned if the parameter exists, or <b>default</b>, which defaults to
an empty list, if the parameter does not exist. Parameters without values are
skipped, though empty string values are allowed. If name is omitted, then a
dictionary of lists is returned. If <b>ignoreCase</b> is true, then the
above behaviour is performed in a case insensitive manner (all parameters
are treated as lowercase). This function understands form information
encoded either as 'application/x-www-form-urlencoded' or
'multipart/form-data'. Uploaded file parameters are not included in this
dictionary; they can be accessed via the file method. </li><p>
<li><b>post1</b>( [name], [default], [ignoreCase] ): <br> Returns request
POST information, similarly to (though slightly differently from) the
function above. If <b>name</b> is specified then a single string is returned
if the parameter exists, or <b>default</b>, which defaults to None, if the
parameter does not exist. If there is more than one value for a parameter,
then only one is returned. Parameters without values are skipped, though
empty string values are allowed. If name is omitted, then a dictionary of
strings is returned. If the optional <b>ignoreCase</b> flag is true, then
the above behaviour is performed in a case insensitive manner (all
parameters are treated as lowercase). This function understands form
information encoded either as 'application/x-www-form-urlencoded' or
'multipart/form-data'. Uploaded file parameters are not included in this
dictionary; they can be accessed via the file method. </li><p>
<li><b>file</b>( [name], [ignoreCase] ): <br> Returns files POSTed in the
request. If <b>name</b> is specified then a single cgi.FieldStorage class is
returned if such a file parameter exists, otherwise None. If name is
omitted, then a dictionary of file entries is returned. If the optional
<b>ignoreCase</b> flag is true, then the above behaviour is performed in a
case insensitive manner (all parameters are treated as lowercase). The
interesting fields of the FieldStorage class are: <p>
<ul>
<li><b>name:</b> the field name, if specified; otherwise None</li>
<li><b>filename:</b> the filename, if specified; otherwise None; this is
the client-side filename, not the filename in which the content is stored
- a temporary file you don't deal with
<li><b>value:</b> the value as a string; for file uploads, this
transparently reads the file every time you request the value
<li><b>file:</b> the file(-like) object from which you can read the data;
None if the data is stored a simple string
<li><b>type:</b> the content-type, or None if not specified
<li><b>type_options:</b> dictionary of options specified on the
content-type line
<li><b>disposition:</b> content-disposition, or None if not specified
<li><b>disposition_options:</b> dictionary of corresponding options
<li><b>headers:</b> a dictionary(-like) object (sometimes rfc822.Message
or a subclass thereof) containing *all* headers
</ul><p>
<li><b>__getitem__</b>( key ): <br> The request module can be used as a
dictionary: i.e. request['foo']. This method first calls the get1() method,
then the post1() method and lastly the file() method trying to find the
first non-None value to return. If no value is found, then this method
returns None. Note: Throwing an exception seemed too strong a semantics, and
so this is a break from Python. One can also iterate over the request
object, as if over a dictionary of field names in the get1 and post1
dictionaries. In the case of overlap, the get1() dictionary takes
precedence. </li><p>
<li><b>getpost</b>( [name], [default], [ignoreCase] ): <br> Using given
parameters, return get() result if not None, otherwise return post() result
if not None, otherwise <b>default</b>. </li><p>
<li><b>getpost1</b>( [name], [default], [ignoreCase] ): <br> Using given
parameters, return get1() result if not None, otherwise return post1()
result if not None, otherwise <b>default</b>. </li><p>
<li><b>postget</b>( [name], [default], [ignoreCase] ): <br> Using given
parameters, return post() result if not None, otherwise return get() result
if not None, otherwise <b>default</b>. </li><p>
<li><b>postget1</b>( [name], [default], [ignoreCase] ): <br> Using given
parameters, return post1() result if not None, otherwise return get1()
result if not None, otherwise <b>default</b>. </li><p>
<li><b>env</b>( [name], [default] ): <br> Returns a dictionary with CGI-like
environment information of this request. If <b>name</b> is specified then a
single entry is returned if the parameter exists, otherwise <b>default</b>,
which defaults to None, if omitted. </li><p>
<li><b>getHeader</b>( [type] ): <br> Return a specific header sent by the
browser. If optional <b>type</b> is omitted, a dictionary of all headers is
returned.</li><p>
<li><b>filename</b>( [path] ): <br> Return the Spyce filename of the request
currently being processed. If an optional <b>path</b> parameter is provided,
then that path is made relative to the Spyce filename of the request
currently being processed. </li><p>
<li><b>stack</b>( ): <br> Return a stack of files processed by the
Spyce runtime; the first (deepest) item on the stack is the filename
corresponding to the URL originally requested. Items may be added
to the stack by include.spyce, spy:parent, or internal redirects.
</li><p>
<li><b>default</b>( value, value2 ): <br> (convenience method) Return
<b>value</b> if it is not None, otherwise return <b>value2</b>. </li><p>
</ul>
Dynamic web pages frequently need to access GET and POST information sent by
the browser. Here is an example that shows this is done.<br>

<table border=1 align=center>
<tr><td align=left bgcolor="#cccccc">
  <font face="arial, helvetica" size="-1"><b>examples/getpost.spy</b></font>
</td></tr><tr><td>
  <font face=courier>

    <pre><font color="#000000"><b>&lt;html&gt;&lt;body&gt;
  Getting GET or POST request information is easy. &lt;br&gt;
  Use the following forms to submit GET or POST info.&lt;br&gt;
  &lt;hr&gt;
  <font color="#ff7448">[[-- input forms --]]</font>
  &lt;form action=&quot;<font color="#CC0000">[[=request.uri('path')]]</font>&quot; method=get&gt;
    get: &lt;input type=text name=Name&gt;
    &lt;input type=submit value=ok&gt;
  &lt;/form&gt;
  &lt;form action=&quot;<font color="#CC0000">[[=request.uri('path')]]</font>&quot; method=post&gt;
    post: &lt;input type=text name=Name&gt;
    &lt;input type=submit value=ok&gt;
  &lt;/form&gt;
  &lt;hr&gt;
  <font color="#ff7448">[[-- display GET and POST information from request object --]]</font>
  &lt;table&gt;&lt;tr&gt;
      &lt;td&gt;request.method()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.method()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.query()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.query()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.get1('name')&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.get1('name')]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.post1('name')&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.post1('name')]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.get1('name', 1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.get1('name', 1)]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.post1('name', 1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.post1('name', 1)]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request['Name']&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request['Name'] ]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request['name']&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request['name'] ]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.get()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.get()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.get1()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.get1()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.post()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.post()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.post1()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.post1()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.getpost()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.getpost()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.getpost1()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.getpost1()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.postget()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.postget()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.postget1()&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.postget1()]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.get(ignoreCase=1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.get(ignoreCase=1)]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.get1(ignoreCase=1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.get1(ignoreCase=1)]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.post(ignoreCase=1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.post(ignoreCase=1)]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.post1(ignoreCase=1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.post1(ignoreCase=1)]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.getpost(ignoreCase=1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.getpost(ignoreCase=1)]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.getpost1(ignoreCase=1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.getpost1(ignoreCase=1)]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.postget(ignoreCase=1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.postget(ignoreCase=1)]]</font>&lt;/td&gt;
    &lt;/tr&gt;&lt;tr&gt;
      &lt;td&gt;request.postget1(ignoreCase=1)&lt;/td&gt;
      &lt;td&gt;<font color="#CC0000">[[=request.postget1(ignoreCase=1)]]</font>&lt;/td&gt;
  &lt;/tr&gt;&lt;/table&gt;
&lt;/body&gt;&lt;/html&gt;
</b></font></pre>
  </font>

  </td></tr><tr><td align=right bgcolor="#cccccc">
    <font face="arial, helvetica" size="-1">
      
      <b><a href="examples/getpost.spy">Run this code</a></b>
    </font>

</td></tr></table>
<p>
The example below presents the results of all the method calls list above. Run
it to understand the information available. <p>

<table border=1 align=center>
<tr><td align=left bgcolor="#cccccc">
  <font face="arial, helvetica" size="-1"><b>examples/request.spy</b></font>
</td></tr><tr><td>
  <font face=courier>

    <pre><font color="#000000"><b>&lt;html&gt;&lt;body&gt;
  Using the Spyce request object, we can obtain 
  information sent along with the request. The 
  table below shows some request methods and their 
  return values. Use the form below to post form 
  data via GET or POST. &lt;br&gt;
  &lt;hr&gt;
  <font color="#ff7448">[[-- input forms --]]</font>
  &lt;form action=&quot;<font color="#CC0000">[[=request.uri('path')]]</font>&quot; method=get&gt;
    get: &lt;input type=text name=name&gt;
    &lt;input type=submit value=ok&gt;
  &lt;/form&gt;
  &lt;form action=&quot;<font color="#CC0000">[[=request.uri('path')]]</font>&quot; method=post&gt;
    post: &lt;input type=text name=name&gt;
    &lt;input type=submit value=ok&gt;
  &lt;/form&gt;
  &lt;hr&gt;
  <font color="#ff7448">[[-- tabulate response information --]]</font>
  &lt;table border=1&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;b&gt;Method&lt;/b&gt;&lt;/td&gt;
      &lt;td&gt;&lt;b&gt;Return value&lt;/b&gt;&lt;/td&gt;
    &lt;/tr&gt;
    <font color="#0000CC">[[ for method in ['uri()', 'uri(&quot;path&quot;)',
      'uri(&quot;query&quot;)', 'method()','query()',
      'get()','get1()', 'post()','post1()',
      'getHeader()','env()', 'filename()']: { 
    ]]</font>
      &lt;tr&gt;
        &lt;td valign=top&gt;request.<font color="#CC0000">[[=method]]</font>&lt;/td&gt;
        &lt;td&gt;<font color="#CC0000">[[=eval('request.%s' % method)]]</font>&lt;/td&gt;
      &lt;/tr&gt;
    <font color="#0000CC">[[ } ]]</font>
  &lt;/table&gt;
&lt;/body&gt;&lt;/html&gt;
</b></font></pre>
  </font>

  </td></tr><tr><td align=right bgcolor="#cccccc">
    <font face="arial, helvetica" size="-1">
      
      <b><a href="examples/request.spy">Run this code</a></b>
    </font>

</td></tr></table>
<p>
A more complicated form... <p>

<table border=1 align=center>
<tr><td align=left bgcolor="#cccccc">
  <font face="arial, helvetica" size="-1"><b>examples/form.spy</b></font>
</td></tr><tr><td>
  <font face=courier>

    <pre><font color="#000000"><b>&lt;html&gt;&lt;body&gt;
Form handling. &lt;br&gt;&lt;hr&gt;
&lt;b&gt;Form:&lt;/b&gt;&lt;br&gt;
&lt;form method=post action=&quot;<font color="#CC0000">[[=request.uri('path')]]</font>&quot;&gt;
&lt;table&gt;
  &lt;tr&gt;
    &lt;td valign=top&gt;Text field:&lt;/td&gt;
    &lt;td&gt;&lt;input name=&quot;textField&quot; type=text value=&quot;&quot; size=15&gt;&lt;/td&gt;
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td valign=top&gt;Textarea field:&lt;/td&gt;
    &lt;td&gt;&lt;textarea name=&quot;textareaField&quot; rows=&quot;5&quot; cols=&quot;30&quot;&gt;&lt;/textarea&gt;&lt;/td&gt;
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td valign=top&gt;Select field:&lt;/td&gt;
    &lt;td&gt;&lt;select name=&quot;selectField&quot;&gt;
      &lt;option&gt;Option 1&lt;/option&gt;
      &lt;option&gt;Option 2&lt;/option&gt;
      &lt;option&gt;Option 3&lt;/option&gt;
    &lt;/select&gt;&lt;/td&gt;
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td valign=top&gt;Radio field:&lt;/td&gt;
    &lt;td&gt;
      &lt;input type=&quot;radio&quot; name=&quot;radioField&quot; value=&quot;Option 1&quot;&gt;Option 1&lt;br&gt;
      &lt;input type=&quot;radio&quot; name=&quot;radioField&quot; value=&quot;Option 2&quot;&gt;Option 2&lt;br&gt;
      &lt;input type=&quot;radio&quot; name=&quot;radioField&quot; value=&quot;Option 3&quot;&gt;Option 3&lt;br&gt;
    &lt;/td&gt;
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td valign=top&gt;Checkbox field:&lt;/td&gt;
    &lt;td&gt;
      &lt;input type=&quot;checkbox&quot; name=&quot;checkField&quot; value=&quot;Option 1&quot;&gt;Option 1&lt;br&gt;
      &lt;input type=&quot;checkbox&quot; name=&quot;checkField&quot; value=&quot;Option 2&quot;&gt;Option 2&lt;br&gt;
      &lt;input type=&quot;checkbox&quot; name=&quot;checkField&quot; value=&quot;Option 3&quot;&gt;Option 3&lt;br&gt;
    &lt;/td&gt;
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td valign=top&gt;&lt;/td&gt;
    &lt;td&gt;&lt;input type=submit value=&quot;Submit&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;&lt;hr&gt;

<font color="#0000CC">[[p=request.post1]]</font>
&lt;b&gt;Results:&lt;/b&gt;&lt;br&gt;
&lt;table&gt;
  &lt;tr&gt;&lt;td&gt;Text field:&lt;/td&gt;&lt;td&gt;<font color="#CC0000">[[=p('textField')]]</font>&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Textarea field:&lt;/td&gt;&lt;td&gt;<font color="#CC0000">[[=p('textareaField')]]</font>&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Select field:&lt;/td&gt;&lt;td&gt;<font color="#CC0000">[[=p('selectField')]]</font>&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Radio field:&lt;/td&gt;&lt;td&gt;<font color="#CC0000">[[=p('radioField')]]</font>&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Checkbox field:&lt;/td&gt;&lt;td&gt;<font color="#CC0000">[[=request.post('checkField')]]</font>&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;&lt;/html&gt;
</b></font></pre>
  </font>

  </td></tr><tr><td align=right bgcolor="#cccccc">
    <font face="arial, helvetica" size="-1">
      
      <b><a href="examples/form.spy">Run this code</a></b>
    </font>

</td></tr></table>
<p>
Lastly, the following example shows how to deal with uploaded files. <p>

<table border=1 align=center>
<tr><td align=left bgcolor="#cccccc">
  <font face="arial, helvetica" size="-1"><b>examples/fileupload.spy</b></font>
</td></tr><tr><td>
  <font face=courier>

    <pre><font color="#000000"><b><font color="#0000CC">[[\ 
if request.post('ct'):
  response.setContentType(request.post1('ct'))
  if request.file('upfile')!=None:
    response.write(request.file('upfile').value)
  else:
    print 'file not properly uploaded'
  raise spyceDone
]]</font>
&lt;html&gt;&lt;body&gt;
  Upload a file and it will be sent back to you.&lt;br&gt;
  <font color="#ff7448">[[-- input forms --]]</font>
  &lt;hr&gt;
  &lt;table&gt;
    &lt;form action=&quot;<font color="#CC0000">[[=request.uri('path')]]</font>&quot; method=post 
        enctype=&quot;multipart/form-data&quot;&gt;
      &lt;tr&gt;
        &lt;td&gt;file:&lt;/td&gt;
        &lt;td&gt;&lt;input type=file name=upfile&gt;&lt;/td&gt;
      &lt;/tr&gt;&lt;tr&gt;
        &lt;td&gt;content-type:&lt;/td&gt;
        &lt;td&gt;&lt;input type=text name=ct value=&quot;text/html&quot;&gt;&lt;/td&gt;
      &lt;/tr&gt;&lt;tr&gt;
        &lt;td&gt;&lt;input type=submit value=ok&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/form&gt;
  &lt;/table&gt;
&lt;/body&gt;&lt;/html&gt;
</b></font></pre>
  </font>

  </td></tr><tr><td align=right bgcolor="#cccccc">
    <font face="arial, helvetica" size="-1">
      
      <b><a href="examples/fileupload.spy">Run this code</a></b>
    </font>

</td></tr></table>
 <p>
<hr>

<table width="100%" align=center><tr>
    <td align=left width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Prev:</b> None</font></td>
    <td align=center width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Up:</b> None</font></td>
    <td align=right width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Next:</b> None</font></td>
</tr></table>
<!-- end body -->
<p>
</font>
</td></tr>
<tr><td colspan=5><hr></td></tr>
<tr><td colspan=5 height=15></td></tr>
<tr><td colspan=5>

  <table width="100%" border=0><tr>
    <td align=left valign=top>
      <font face="arial, helvetica" size="-1">
      <b><big>[[ <font face="arial, helvetica" color="#cc0000">Spyce</font> ]]</big></b><br>
      <small>Python Server Pages<br>version 2.0.3</small>
      </font>
    </td><td align=center valign=top>
      <a href="http://spyce.sourceforge.net"><img align=middle width=120 height=50 border=0 src="/spycepow.gif" alt="Spyce Powered"></a>
      <a href="http://sourceforge.net"><img align=middle src="http://sourceforge.net/sflogo.php?group_id=53655&amp;type=5" width="141" height="50" border="0" alt="SourceForge Logo"></a>
    </td><td align=right valign=top>
    </td>
  </tr></table>

</td></tr></table>

</body></html>
