<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <style type="text/css"><!--
	.code {
	  border: 2px dotted;

	  font-family: Courier,monospace;
	  font-size: 90%;

	  background-color: #E0E0E0;
	  margin-left: 10;
	  margin-right: 10;
	  padding-left: 10;
	  padding-right: 10;
	  padding-top: 0;
	  padding-bottom: 10;
	}
    a { text-decoration: none; color: #0000cc }
    a:hover { text-decoration: underline; color: #0000cc; }
  --></style>
<title>Spyce - Python Server Pages (PSP)</title>
  <meta NAME="LANGUAGE" CONTENT="en-US">
  <meta NAME="RATING" CONTENT="GENERAL">
  <meta NAME="ROBOTS" CONTENT="ALL">
  <meta name="abstract" content="Spyce is a server-side language that supports simple and efficient Python-based dynamic HTML generation. Those who like Python and are familiar with JSP, or PHP, or ASP, should have a look at Spyce.">
  <meta name="description" content="Spyce - Python Server Pages: a server-side language that supports simple and efficient Python-based dynamic HTML generation.">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta HTTP-EQUIV="Refresh" CONTENT="1800">
  <meta HTTP-EQUIV="Revisit-After" CONTENT="15 days">
  <link rel="icon" href="spycefav.ico" type="image/x-icon">
  <link rel="shortcut icon" href="spycefav.ico" type="image/x-icon">
<link rel="Next" href="doc-None.html">
<link rel="next" href="doc-None.html">
<link rel="Previous" href="doc-None.html">
<link rel="Prev" href="doc-None.html">
<link rel="prev" href="doc-None.html">
<link rel="Contents" href="doc.html">
<link rel="contents" href="doc.html">
</head>

<body bgcolor="#efefef">

<table border=0 cellspacing=0 cellpadding=0 width="100%"><tr><td valign=top>

<!-- links section -->

<!-- index -->
<table border=0 align=center width="100%"><tr><td align=center nowrap>
  <a href="http://spyce.sourceforge.net"><img src="/spyce.gif" border=0 alt="spyce" width=58 height=70></a>
</td></tr></table>

<table align=center border=1 cellpadding=4 cellspacing=0 bgcolor="#CCCCCC">
<tr><td align=left bgColor="#AAAAAA"><b>
  <font face="arial, helvetica" size="-1">
<b><a href="/index.html">home</a></b><br>
  </font>
</b></td></tr>
<tr><td align=left>
  <font face="arial, helvetica" size="-1">
<b><a href="http://svn-hosting.com/svn/spyce/trunk/spyce/CHANGES">changelog</a></b><br>
<b><a href="/docs/license.html">license</a></b><br>
<b><a href="/docs/get.html">download</a></b><br>
<b><a href="/docs/mail.html">community</a></b><br>
<b><a href="/docs/wishlist.html">wishlist</a></b><br>
  </font>
</td></tr>
<tr><td align=left bgColor="#AAAAAA"><b>
  <font face="arial, helvetica" size="-1">
<b><a href="/docs/doc.html">documentation</a></b><br>
  </font>
</b></td></tr>
<tr><td align=left>
  <font face="arial, helvetica" size="-1">
<b><a href="/docs/doc-intro.html">intro</a></b><br>
<b><a href="/docs/doc-lang.html">language</a></b><br>
<b><a href="/docs/doc-runtime.html">runtime</a></b><br>
<b><a href="/docs/doc-mod.html">modules</a></b><br>
<b><a href="/docs/doc-tag.html">tags</a></b><br>
<b><a href="/docs/doc-conf.html">install</a></b><br>
<b><a href="/docs/eg.html">examples list</a></b><br>
  </font>
</td></tr>
<tr><td align=left bgColor="#AAAAAA"><b>
  <font face="arial, helvetica" size="-1">
      <b>other</b>
  </font>
</b></td></tr>
<tr><td align=left>
  <font face="arial, helvetica" size="-1">
<b><a href="/docs/links.html">resources</a></b><br>
<b><a href="http://sourceforge.net/projects/spyce/">sf project</a></b><br>
<b><a href="http://spyced.blogspot.com/">spyced blog</a></b><br>
  </font>
</td></tr></table><br>

<!-- spacers -->
</td>
<td width=15><img src=/trans1x1.gif width=15 height=1 ></td>
<td width=1 bgcolor="#888888"><img src=/trans1x1.gif width=1 height=1 ></td>
<td width=15><img src=/trans1x1.gif width=15 height=1 ></td>
<td width="100%" valign=top>

<!-- page title -->
<table border=0 width="100%"><tr>
  <td nowrap valign=bottom>
    <b><font face="arial, helvetica" size="-1"><big>Documentation</big></font></b><br clear=all>
  </td>
  <td align=right nowrap valign=bottom>
    <font face="arial, helvetica" size="-1">
    <b><big>[[ <font face="arial, helvetica" color="#cc0000">Spyce</font> ]]</big></b><br>
    </font>
</tr></table>

<hr>
<font face="arial, helvetica" size="-1">

<!-- body -->

<table width="100%" align=center><tr>
    <td align=left width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Prev:</b> None</font></td>
    <td align=center width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Up:</b> None</font></td>
    <td align=right width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Next:</b> None</font></td>
</tr></table>
<hr>
<big><a name="mod_toc"></a><b>4.16. <font color=#ee0000>TOC</font></b></big><p>


The TOC module provides support for constructing a table contents for a
lengthy document, such as this user documentation. The primary task of the TOC
module is to maintain a document tree, and initiate callbacks at the
appropriate points in the document. Note that this module may automatically
force a secondary processing of the Spyce file to resolve forward references.
<p>
The module provides the following methods to segment the document:
<ul>
<li><b>begin</b>( data, [tag] ): <br> Increase the nesting level and add a
new section. The <b>data</b> is stored in the document tree, and used for
callbacks (see later). An optional <b>tag</b> may be associated with the
node, otherwise one will automatically be generated. The function <b>b</b>()
is equivalent. </li><p>
<li><b>next</b>( data, [tag] ): <br> Add a new section at the same nesting
level. The <b>data</b> is stored in the document tree, and used for
callbacks (see later). An optional <b>tag</b> may be associated with the
node, or one will be automatically generated. The function <b>n</b>() is
equivalent.</li><p>
<li><b>end</b>(): <br> Decrease the nesting level. The function <b>e</b>()
is equivalent.</li><p>
<li><b>anchor</b>( data, [tag] ): <br> Set <b>data</b> and optionally the
<b>tag</b> associated with the root of the document tree. If the tag is
omitted, it defaults to the string <i>'root'</i>. </li><p>
<li><b>level</b>( depth, data, [tag] ): <br> Start a new section at given
<b>depth</b> with given <b>data</b> and optional <b>tag</b>. The necessary
begin(), next() and end() calls are automatically made, based on the current
document depth, so both types of calls can be inter-mixed. </li> <p>
<li><b>l1</b>( data, [tag] ): <br> Start a level&nbsp;1 section. This
function merely calls <b>level</b>(1,&nbsp;<b>data</b>,&nbsp;<b>tag</b>).
The functions, <b>l2</b>()...<b>l9</b>() are similarly defined. </li> <p>
</ul> <p>
The following methods provide access to document information:
<ul>
<li><b>getTag</b>(): <br> Return the tag of the current document section.
</li><p>
<li><b>getNumbering</b>( [tag] ) <br> Return the numbering of some section
of the document identified by the given <b>tag</b>. If the tag is omitted,
the current document section is assumed. The numbering is an array of
numbers. This function may return 'None' on the first pass through a
document. </li><p>
<li><b>getData</b>( [tag] ) <br> Return the data associated with some
section of the document identified by the given <b>tag</b>. If the tag is
omitted, the current document section is assumed. This function may return
'None' on the first pass through a document. </li><p>
<li><b>getDepth</b>( [tag] ) <br> Return the depth of some section of the
document identified by the given <b>tag</b>. If the tag is omitted, the
current document section is assumed. This function may return 'None' on the
first pass through a document. </li><p>
<li><b>getNextTag</b>( [tag] ) <br> Return the tag of the section following
some section of the document identified by the given <b>tag</b>. If the tag
is omitted, the current document section is assumed. If this is the last
section of the document, then this function will return 'None'. This
function may return 'None' on the first pass through a document. </li><p>
<li><b>getPrevTag</b>( [tag] ) <br> Return the tag of the section before
some section of the document identified by the given <b>tag</b>. If the tag
is omitted, the current document section is assumed. If this is the first
section of the document, then this function will return 'None'. This
function may return 'None' on the first pass through a document. </li><p>
<li><b>getParentTag</b>( [tag] ) <br> Return the tag of the section above
(or containing) some section of the document identified by the given
<b>tag</b>. If the tag is omitted, the current document section is assumed.
If this is the top-most section of the document, then this function will
return 'None'. This function may return 'None' on the first pass through a
document. </li><p>
<li><b>getChildrenTags</b>( [tag] ) <br> Return a list (possibly empty) of
tags of the sections directly contained within some section of the document
identified by the given <b>tag</b>. If the tag is omitted, the current
document section is assumed. This function may return a shorter list than
anticipated or 'None', on the first pass through a document.
</ul> <p>
The TOC modules can make callbacks to handlers that format the document
correctly. The handlers should be defined and registered before the first
section break in the document. The following functions register handlers:
<ul>
<li><b>setDOC_PUSH</b>( f ): <br> Register a function <b>f</b> to be called
when the nesting depth of the document increases. </li><p>
<li><b>setDOC_POP</b>( f ): <br> Register a function <b>f</b> to be called
when the nesting depth of the document decreases. </li><p>
<li><b>setDOC_START</b>( f ): <br> Register a funtion <b>f</b> to be called
at the beginning of a section. </li><p>
<li><b>setDOC_END</b>( f ): <br> Register a function <b>f</b> to be called
at the end of a section. </li><p>
<li><b>setTOC_PUSH</b>( f ): <br> Register a function <b>f</b> to be called
when the nesting depth of the table of contents increases. </li><p>
<li><b>setTOC_POP</b>( f ): <br> Register a function <b>f</b> to be called
when the nesting depth of the table of contents decreases. </li><p>
<li><b>setTOC_ENTRY</b>( f ): <br> Register a function <b>f</b> to be called
for each table of contents entry. </li><p>
</ul><p>
Each callback function should be of the form: <center> <b>f</b>(depth,
tag, numbering, data), </center> where: <b>depth</b> is the nesting depth,
<b>tag</b> is the associated tag, <b>numbering</b> is the position array, and
<b>data</b> is the associated data of the section for which the callback was
made.<p>
The <i>DOC</i> callbacks are made as the sections are encountered. The
<i>TOC</i> callbacks are made while printing the table of contents. If the
modules detects that forward references exist in the document, the document
will be processed twice, and only the second output will be sent. Note that
buffering MUST be turned on for this to function correctly. <p>
To display a table of contents, define the appropriate TOC callback functions
and call:
<ul>
<li><b>showTOC</b>(): Display the table of contents.
</ul>
For an example of how to use the TOC module, please refer to the source Spyce
file of this documentation. <p>
<p>
<hr>

<table width="100%" align=center><tr>
    <td align=left width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Prev:</b> None</font></td>
    <td align=center width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Up:</b> None</font></td>
    <td align=right width="33%" nowrap><font face="arial, helvetica" size="-1"><b>Next:</b> None</font></td>
</tr></table>
<!-- end body -->
<p>
</font>
</td></tr>
<tr><td colspan=5><hr></td></tr>
<tr><td colspan=5 height=15></td></tr>
<tr><td colspan=5>

  <table width="100%" border=0><tr>
    <td align=left valign=top>
      <font face="arial, helvetica" size="-1">
      <b><big>[[ <font face="arial, helvetica" color="#cc0000">Spyce</font> ]]</big></b><br>
      <small>Python Server Pages<br>version 2.0.3</small>
      </font>
    </td><td align=center valign=top>
      <a href="http://spyce.sourceforge.net"><img align=middle width=120 height=50 border=0 src="/spycepow.gif" alt="Spyce Powered"></a>
      <a href="http://sourceforge.net"><img align=middle src="http://sourceforge.net/sflogo.php?group_id=53655&amp;type=5" width="141" height="50" border="0" alt="SourceForge Logo"></a>
    </td><td align=right valign=top>
    </td>
  </tr></table>

</td></tr></table>

</body></html>
